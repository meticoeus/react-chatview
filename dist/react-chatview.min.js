!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactChatView=e(require("react")):t.ReactChatView=e(t.React)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,r){(function(t,r){function n(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function i(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););return t}function l(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function c(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function a(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function u(t,e){return null==t?void 0:t[e]}function s(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function p(t,e){return function(r){return t(e(r))}}function h(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function d(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__=He?He(null):{}}function y(t){return this.has(t)&&delete this.__data__[t]}function v(t){var e=this.__data__;if(He){var r=e[t];return r===It?void 0:r}return ve.call(e,t)?e[t]:void 0}function _(t){var e=this.__data__;return He?void 0!==e[t]:ve.call(e,t)}function g(t,e){return this.__data__[t]=He&&void 0===e?It:e,this}function j(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function m(){this.__data__=[]}function S(t){var e=this.__data__,r=N(e,t);return!(r<0)&&(r==e.length-1?e.pop():Pe.call(e,r,1),!0)}function w(t){var e=this.__data__,r=N(e,t);return r<0?void 0:e[r][1]}function O(t){return N(this.__data__,t)>-1}function T(t,e){var r=this.__data__,n=N(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function P(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function x(){this.__data__={hash:new d,map:new(Ae||j),string:new d}}function L(t){return lt(this,t).delete(t)}function I(t){return lt(this,t).get(t)}function k(t){return lt(this,t).has(t)}function A(t,e){return lt(this,t).set(t,e),this}function E(t){this.__data__=new j(t)}function R(){this.__data__=new j}function W(t){return this.__data__.delete(t)}function H(t){return this.__data__.get(t)}function F(t){return this.__data__.has(t)}function M(t,e){var r=this.__data__;if(r instanceof j){var n=r.__data__;if(!Ae||n.length<Lt-1)return n.push([t,e]),this;r=this.__data__=new P(n)}return r.set(t,e),this}function q(t,e){var r=Ve(t)||_t(t)?a(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!ve.call(t,i)||o&&("length"==i||ft(i,n))||r.push(i);return r}function D(t,e,r){var n=t[e];ve.call(t,e)&&vt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function N(t,e){for(var r=t.length;r--;)if(vt(t[r][0],e))return r;return-1}function U(t,e){return t&&nt(e,Tt(e),t)}function C(t,e,r,n,o,l,c){var a;if(n&&(a=l?n(t,o,l,c):n(t)),void 0!==a)return a;if(!wt(t))return t;var u=Ve(t);if(u){if(a=at(t),!e)return rt(t,a)}else{var f=Be(t),p=f==Wt||f==Ht;if(ze(t))return G(t,e);if(f==qt||f==At||p&&!l){if(s(t))return l?t:{};if(a=ut(p?{}:t),!e)return ot(t,U(a,t))}else{if(!oe[f])return l?t:{};a=st(t,f,C,e)}}c||(c=new E);var h=c.get(t);if(h)return h;if(c.set(t,a),!u)var d=r?it(t):Tt(t);return i(d||t,function(o,i){d&&(i=o,o=t[i]),D(a,i,C(o,e,r,n,i,t,c))}),a}function $(t){return wt(t)?Oe(t):{}}function B(t,e,r){var n=e(t);return Ve(t)?n:l(n,r(t))}function V(t){return _e.call(t)}function z(t){return!(!wt(t)||ht(t))&&(mt(t)||s(t)?ge:re).test(bt(t))}function Y(t){if(!dt(t))return Ie(t);var e=[];for(var r in Object(t))ve.call(t,r)&&"constructor"!=r&&e.push(r);return e}function G(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}function X(t){var e=new t.constructor(t.byteLength);return new Se(e).set(new Se(t)),e}function J(t,e){var r=e?X(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function K(t,e,r){return c(e?r(f(t),!0):f(t),n,new t.constructor)}function Q(t){var e=new t.constructor(t.source,ee.exec(t));return e.lastIndex=t.lastIndex,e}function Z(t,e,r){return c(e?r(h(t),!0):h(t),o,new t.constructor)}function tt(t){return Ce?Object(Ce.call(t)):{}}function et(t,e){var r=e?X(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function rt(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function nt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var l=e[o],c=n?n(r[l],t[l],l,r,t):void 0;D(r,l,void 0===c?t[l]:c)}return r}function ot(t,e){return nt(t,$e(t),e)}function it(t){return B(t,Tt,$e)}function lt(t,e){var r=t.__data__;return pt(e)?r["string"==typeof e?"string":"hash"]:r.map}function ct(t,e){var r=u(t,e);return z(r)?r:void 0}function at(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&ve.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function ut(t){return"function"!=typeof t.constructor||dt(t)?{}:$(we(t))}function st(t,e,r,n){var o=t.constructor;switch(e){case $t:return X(t);case Et:case Rt:return new o(+t);case Bt:return J(t,n);case Vt:case zt:case Yt:case Gt:case Xt:case Jt:case Kt:case Qt:case Zt:return et(t,n);case Ft:return K(t,n,r);case Mt:case Ut:return new o(t);case Dt:return Q(t);case Nt:return Z(t,n,r);case Ct:return tt(t)}}function ft(t,e){return!!(e=null==e?kt:e)&&("number"==typeof t||ne.test(t))&&t>-1&&t%1==0&&t<e}function pt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ht(t){return!!be&&be in t}function dt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||he)}function bt(t){if(null!=t){try{return ye.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function yt(t){return C(t,!1,!0)}function vt(t,e){return t===e||t!==t&&e!==e}function _t(t){return jt(t)&&ve.call(t,"callee")&&(!Te.call(t,"callee")||_e.call(t)==At)}function gt(t){return null!=t&&St(t.length)&&!mt(t)}function jt(t){return Ot(t)&&gt(t)}function mt(t){var e=wt(t)?_e.call(t):"";return e==Wt||e==Ht}function St(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=kt}function wt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ot(t){return!!t&&"object"==typeof t}function Tt(t){return gt(t)?q(t):Y(t)}function Pt(){return[]}function xt(){return!1}var Lt=200,It="__lodash_hash_undefined__",kt=9007199254740991,At="[object Arguments]",Et="[object Boolean]",Rt="[object Date]",Wt="[object Function]",Ht="[object GeneratorFunction]",Ft="[object Map]",Mt="[object Number]",qt="[object Object]",Dt="[object RegExp]",Nt="[object Set]",Ut="[object String]",Ct="[object Symbol]",$t="[object ArrayBuffer]",Bt="[object DataView]",Vt="[object Float32Array]",zt="[object Float64Array]",Yt="[object Int8Array]",Gt="[object Int16Array]",Xt="[object Int32Array]",Jt="[object Uint8Array]",Kt="[object Uint8ClampedArray]",Qt="[object Uint16Array]",Zt="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,ee=/\w*$/,re=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,oe={};oe[At]=oe["[object Array]"]=oe[$t]=oe[Bt]=oe[Et]=oe[Rt]=oe[Vt]=oe[zt]=oe[Yt]=oe[Gt]=oe[Xt]=oe[Ft]=oe[Mt]=oe[qt]=oe[Dt]=oe[Nt]=oe[Ut]=oe[Ct]=oe[Jt]=oe[Kt]=oe[Qt]=oe[Zt]=!0,oe["[object Error]"]=oe[Wt]=oe["[object WeakMap]"]=!1;var ie="object"==typeof t&&t&&t.Object===Object&&t,le="object"==typeof self&&self&&self.Object===Object&&self,ce=ie||le||Function("return this")(),ae="object"==typeof e&&e&&!e.nodeType&&e,ue=ae&&"object"==typeof r&&r&&!r.nodeType&&r,se=ue&&ue.exports===ae,fe=Array.prototype,pe=Function.prototype,he=Object.prototype,de=ce["__core-js_shared__"],be=function(){var t=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ye=pe.toString,ve=he.hasOwnProperty,_e=he.toString,ge=RegExp("^"+ye.call(ve).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=se?ce.Buffer:void 0,me=ce.Symbol,Se=ce.Uint8Array,we=p(Object.getPrototypeOf,Object),Oe=Object.create,Te=he.propertyIsEnumerable,Pe=fe.splice,xe=Object.getOwnPropertySymbols,Le=je?je.isBuffer:void 0,Ie=p(Object.keys,Object),ke=ct(ce,"DataView"),Ae=ct(ce,"Map"),Ee=ct(ce,"Promise"),Re=ct(ce,"Set"),We=ct(ce,"WeakMap"),He=ct(Object,"create"),Fe=bt(ke),Me=bt(Ae),qe=bt(Ee),De=bt(Re),Ne=bt(We),Ue=me?me.prototype:void 0,Ce=Ue?Ue.valueOf:void 0;d.prototype.clear=b,d.prototype.delete=y,d.prototype.get=v,d.prototype.has=_,d.prototype.set=g,j.prototype.clear=m,j.prototype.delete=S,j.prototype.get=w,j.prototype.has=O,j.prototype.set=T,P.prototype.clear=x,P.prototype.delete=L,P.prototype.get=I,P.prototype.has=k,P.prototype.set=A,E.prototype.clear=R,E.prototype.delete=W,E.prototype.get=H,E.prototype.has=F,E.prototype.set=M;var $e=xe?p(xe,Object):Pt,Be=V;(ke&&Be(new ke(new ArrayBuffer(1)))!=Bt||Ae&&Be(new Ae)!=Ft||Ee&&"[object Promise]"!=Be(Ee.resolve())||Re&&Be(new Re)!=Nt||We&&"[object WeakMap]"!=Be(new We))&&(Be=function(t){var e=_e.call(t),r=e==qt?t.constructor:void 0,n=r?bt(r):void 0;if(n)switch(n){case Fe:return Bt;case Me:return Ft;case qe:return"[object Promise]";case De:return Nt;case Ne:return"[object WeakMap]"}return e});var Ve=Array.isArray,ze=Le||xt;r.exports=yt}).call(e,r(8),r(9)(t))},function(t,e,r){t.exports=r(6)()},function(e,r){e.exports=t},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(2),u=n(a),s=r(1),f=n(s),p=r(0),h=n(p),d=!1;try{var b=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("test",null,b)}catch(t){}var y=function(t){function e(t){o(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.rafRequestId=null,r.scrollTop=0,r.scrollHeight=void 0,r.state={isInfiniteLoading:!1},r.pollScroll=r.pollScroll.bind(r),r.onScroll=r.onScroll.bind(r),r.setScrollable=r.setScrollable.bind(r),r.setSmoothScrollingWrapper=r.setSmoothScrollingWrapper.bind(r),r}return l(e,t),c(e,[{key:"componentDidMount",value:function(){var t=this.props.flipped?this.scrollable.scrollHeight-this.scrollable.clientHeight:0;this.scrollable.scrollTop=t,this.scrollTop=t,d?this.scrollable.addEventListener("scroll",this.onScroll,{passive:!0}):this.rafRequestId=window.requestAnimationFrame(this.pollScroll),"function"==typeof this.props.returnScrollable&&this.props.returnScrollable(this.scrollable)}},{key:"componentDidUpdate",value:function(){this.updateScrollTop()}},{key:"componentWillUnmount",value:function(){this.scrollable.removeEventListener("scroll",this.onScroll,{passive:!0}),window.cancelAnimationFrame(this.rafRequestId)}},{key:"onScroll",value:function(){var t=this;if(this.scrollable.scrollTop!==this.scrollTop){if(this.shouldTriggerLoad()){this.props.usePropLoading||this.setState({isInfiniteLoading:!0});var e=this.props.onInfiniteLoad();this.props.usePropLoading||e.then(function(){return t.setState({isInfiniteLoading:!1})})}this.updateScrollTop()}}},{key:"pollScroll",value:function(){this.onScroll(),this.rafRequestId=window.requestAnimationFrame(this.pollScroll)}},{key:"isPassedThreshold",value:function(t,e,r,n,o){return t?r<=e:r>=n-o-e}},{key:"shouldTriggerLoad",value:function(){return this.isPassedThreshold(this.props.flipped,this.props.scrollLoadThreshold,this.scrollable.scrollTop,this.scrollable.scrollHeight,this.scrollable.clientHeight)&&!this.getIsInfiniteLoading()&&this.props.shouldTriggerLoad()}},{key:"updateScrollTop",value:function(){var t=this.scrollable.scrollTop+(this.props.flipped?this.scrollable.scrollHeight-(this.scrollHeight||0):0),e=this.scrollHeight?this.scrollHeight-this.scrollable.scrollHeight:0;this.props.flipped&&e>0&&(t+=e),t!==this.scrollable.scrollTop&&(this.scrollable.scrollTop=t),this.scrollTop=this.scrollable.scrollTop,this.scrollHeight=this.scrollable.scrollHeight}},{key:"getIsInfiniteLoading",value:function(){return this.props.usePropLoading?this.props.isInfiniteLoading:this.state.isInfiniteLoading}},{key:"setScrollable",value:function(t){this.scrollable=t}},{key:"setSmoothScrollingWrapper",value:function(t){this.smoothScrollingWrapper=t}},{key:"render",value:function(){var t=this,e=(0,h.default)(this.props.children);this.props.flipped&&!this.props.reversed&&e.reverse();var r=u.default.createElement("div",{ref:function(e){t.loadingSpinner=e}},this.getIsInfiniteLoading()?this.props.loadingSpinnerDelegate:null);return this.props.useSmoothScrollingWrapper?u.default.createElement("div",{className:this.props.className,ref:this.setScrollable,style:this.props.scrollableStyle},u.default.createElement("div",{ref:this.setSmoothScrollingWrapper},this.props.flipped?r:null,e,this.props.flipped?null:r)):u.default.createElement("div",{className:this.props.className,ref:this.setScrollable,style:this.props.scrollableStyle},this.props.flipped?r:null,e,this.props.flipped?null:r)}}]),e}(a.Component);y.propTypes={flipped:f.default.bool,reversed:f.default.bool,scrollLoadThreshold:f.default.number,shouldTriggerLoad:f.default.func,onInfiniteLoad:f.default.func.isRequired,usePropLoading:f.default.bool,isInfiniteLoading:f.default.bool,loadingSpinnerDelegate:f.default.element,useSmoothScrollingWrapper:f.default.bool,scrollableStyle:f.default.object,className:f.default.string,children:f.default.node,returnScrollable:f.default.func},e.default=y,y.defaultProps={flipped:!1,usePropLoading:!1,scrollLoadThreshold:10,shouldTriggerLoad:function(){return!0},loadingSpinnerDelegate:u.default.createElement("div",null),useSmoothScrollingWrapper:!0,scrollableStyle:{overflowX:"hidden",overflowY:"auto"},className:""},t.exports=e.default},function(t,e,r){"use strict";function n(t){return function(){return t}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t},t.exports=o},function(t,e,r){"use strict";function n(t,e,r,n,i,l,c,a){if(o(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[r,n,i,l,c,a],f=0;u=new Error(e.replace(/%s/g,function(){return s[f++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var o=function(t){};t.exports=n},function(t,e,r){"use strict";var n=r(4),o=r(5),i=r(7);t.exports=function(){function t(t,e,r,n,l,c){c!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return r.checkPropTypes=n,r.PropTypes=r,r}},function(t,e,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}])});